# DevSecOps-Pro
Notes for future / Exam

> First, we need to download the source code of the project from our git repository.

```bash
git clone https://gitlab.practical-devsecops.training/pdso/django.nv webapp
```

> Let’s cd into the application so we can scan the app.

```bash
cd webapp
```

> Let’s install the bandit scanner on the system to perform static analysis.

```bash
pip3 install bandit==1.7.1
```

> Run the scanner

```bash
bandit -r . -f json | tee bandit-output.json
```

> Upload the results to DefectDojo

```bash
curl https://gitlab.practical-devsecops.training/-/snippets/3/raw -o upload-results.py
```

> check options
```bash
python3 upload-results.py --help
```

> add in api key from defectdojo website 
```bash
export API_KEY=INSERT_API_KEY_HERE
```
> upload scan We can now upload the bandit’s scan output (bandit-output.json) to DefectDojo.
```bash
python3 upload-results.py --host dojo-eggkd08x.lab.practical-devsecops.training --api_key $API_KEY --engagement_id 1 --product_id 1 --lead_id 1 --environment "Production" --result_file bandit-output.json --scanner "Bandit Scan"
```


> Scan the production machine https://prod-eggkd08x.lab.practical-devsecops.training with the help of the ZAP docker image owasp/zap2docker-stable:2.10.0, and save the results to /webapp/zap-output.xml

```bash 
docker run --user $(id -u):$(id -g) -w /zap -v $(pwd):/zap/wrk:rw \
           --rm owasp/zap2docker-stable:2.10.0 zap-baseline.py \
           -t https://prod-eggkd08x.lab.practical-devsecops.training \
           -d -x zap-output.xml
```

> Upload the ZAP scan results to Defect Dojo

```bash
python3 upload-results.py --host dojo-eggkd08x.lab.practical-devsecops.training \
    --api_key $API_KEY --engagement_id 1 --product_id 1 \
    --lead_id 1 --environment "Production" \
    --result_file /webapp/zap-output.xml \
    --scanner "ZAP Scan"
    
```
